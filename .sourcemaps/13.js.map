{"version":3,"sources":["../../src/pages/desafiliar/desafiliar.module.ts","../../src/pages/desafiliar/desafiliar.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DesafiliarPage } from './desafiliar';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    DesafiliarPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(DesafiliarPage),\n    TranslateModule\n  ],\n})\nexport class DesafiliarPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/desafiliar/desafiliar.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, MenuController, LoadingController, AlertController, Platform } from 'ionic-angular';\nimport { HttpProvider } from '../../providers/http/http';\nimport { DbaProvider } from '../../providers/dba/dba';\nimport { UtilsProvider } from '../../providers/utils/utils';\nimport { Storage } from '@ionic/storage';\ndeclare var AesUtil: any;\n\n/**\n * Generated class for the DesafiliarPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-desafiliar',\n  templateUrl: 'desafiliar.html',\n})\nexport class DesafiliarPage {\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,  public menuCtrl: MenuController,\n    public loading: LoadingController,\n    private storage: Storage,\n    public http: HttpProvider,\n    public dba: DbaProvider, \n    private alertCtrl: AlertController,\n    public utils: UtilsProvider,\n    public platform: Platform) {\n\n    //Metodo para cuando se le de back al celular cierre la app y lo envie al login\n    this.utils.outApp(\"LoginPage\");\n    platform.registerBackButtonAction(() => {\n      this.navCtrl.push(\"BandejaMenuPage\");\n    });\n      \n  }\n\n  ionViewWillEnter(){\n    \n    //this.presentConfirm();\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad DesafiliarPage');\n    \n  }\n\n  public menu(){\n    this.menuCtrl.toggle();\n  }\n\n  presentConfirm() {\n    let alert = this.alertCtrl.create({\n      title: this.utils.getMessageLanguage(\"logout.message\"),\n      message: this.utils.getMessageLanguage(\"DesafiliarMensaje\"),\n      buttons: [\n        {\n          text: this.utils.getMessageLanguage(\"confirm.btnAceptar\"),\n          handler: data => {\n            if (this.utils.getMessageLanguage(\"confirm.btnAceptar\")) \n            {\n              //this.utils.presentLoading();\n              this.desafiliarUsuario();\n                    \n            }\n          }\n        },\n        {\n          text: this.utils.getMessageLanguage(\"confirm.btnCancelar\"),\n          handler: data => {\n            if (this.utils.getMessageLanguage(\"confirm.btnCancelar\")) \n            {\n              \n              console.log(\"Salida Cancelada\");\n              this.navCtrl.push(\"BandejaMenuPage\");\n            }\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  \n  presentLoadingDefault() {\n    let loading = this.loading.create({\n      content: ''\n    });\n\n    loading.present();\n\n    setTimeout(() => {\n      loading.dismiss();\n    }, 3000);\n  }\n\n  //DesafiliaciÃ³n de usuario\n  public desafiliarUsuario(){\n    this.dba.searchIdFinger().then(idFinger => {\n\n   //var userIdentificator  = this.dba.searchIdDevice(\"optional\");\n   var userIdentificator  =idFinger;\n\n\n    //alert(\"entro\");\n    var latitud; \n    var longitud;\n\n    // Obtencion de la longitud y la latitud de la persona\n    this.storage.get('latitud').then((lat) => {\n      this.storage.get('longitud').then((lon) => {\n        if(lat != null && lon != null){\n          latitud = lat;\n          longitud = lon;\n        }\n      });\n    });\n    \n    this.presentLoadingDefault();\n    var aesUtil = new AesUtil(128,1000);\n    \n    \n    this.storage.get('MESSAGEID').then((val) => {\n\n      this.storage.get('msgjsessionId').then((val) => {\n        if (val != null) {\n          var msgjsessionId = val;\n\n\n          if (val != null) {\n\n            var messageId = val;\n            var urlOtp = \"product/disenrollUser/\";\n\n           /* var newModel: string = this.utils.changePuntoComa(this.device.model);\n\n            var data = '{\"iddev\":\"' + this.device.uuid + '\",' +\n              '\"model\":\"' + newModel + '\",' +\n              '\"cordova\":\"' + this.device.cordova + '\",' +\n              '\"plataform\":\"' + this.device.platform + '\",' +\n              '\"version\":\"' + this.device.version + '\",' +\n              '\"manufacturer\":\"' + this.device.manufacturer + '\",' +\n              '\"serial\":\"' + this.device.serial + '\",' +\n              '\"isVirtual\":\"' + this.device.isVirtual + '\"}';*/\n\n              var data =  this.utils.infoDevice();\n\n            var deviceDATA = aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, JSON.stringify(data));\n            //Datos del dispositivo\n            var jsonDataDevice =\n            {\n              \"company\": aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, \"1\"),\n              \"channel\": \"INT\",\n              \"internalUserName\": \"\",\n              \"externalUserName\": \"\",\n              \"messageId\": messageId,\n              \"msgjsessionId\": msgjsessionId,\n              \"identificator\": userIdentificator,\n              \"device\": {\n                \"data\": deviceDATA\n              },\n              \"authType\": \"AUTH\",\n              \"reasonCalled\": \"auth_desaUsu\",\n              \"scoreRiskCustomer\": \"0\",\n              \"geoRefLatitude\": latitud,\n              \"geoRefLongitude\": longitud,\n              \"deviceTrustId\": aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, this.utils.deviceId),\n              \"deviceTrustData\": deviceDATA,\n              \"idkey\": this.http.idkey\n            }\n\n            this.http.callServer(jsonDataDevice, urlOtp).then(res => {\n\n              //var message = JSON.stringify(res);\n              //alert(\"Desafiliar: \"+message); \n\n              try {\n\n                if (res.message.code == \"0000\" && res.message.description) {\n                  this.utils.presentAlert(\"mensajeDesafiliar\");\n                  this.dba.dropTable(); // Eliminar Registro\n                  this.navCtrl.push(\"LoginPage\", { povDesafiliar: \"1\" });\n\n                }\n                else {\n                  this.utils.errorControl(res.message.code);\n                }\n\n              }\n              catch (error) {\n               // this.utils.presentAlert(\"Se presento el siguiente error: \" + error);\n              }\n            },\n              error => {\n                if (error) {\n                  this.utils.presentAlert(\"mensajePeticion\" + error);\n                  this.storage.clear();\n                  this.utils.clearVariableSesion();\n                  this.navCtrl.setRoot(\"LoginPage\");\n                }\n              })\n\n          }\n        }\n      });\n    });\n\n\n\n\n  })\n\n\n\n  }// fin metodo\n\n  public devolverse() {\n    this.navCtrl.push(\"BandejaMenuPage\");\n  }\n\n  public aceptar() {\n    this.presentConfirm();\n  }\n\n  public cancelar() {\n    this.navCtrl.push(\"BandejaMenuPage\");\n  }\n  public reiniciarSesion() {\n    this.utils.reload();  \n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/desafiliar/desafiliar.ts"],"sourceRoot":""}