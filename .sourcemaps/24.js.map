{"version":3,"sources":["../../src/pages/p-credit/p-credit.module.ts","../../src/pages/p-credit/p-credit.ts"],"names":[],"mappings":"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","file":"24.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PCreditPage } from './p-credit';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    PCreditPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PCreditPage),\n    TranslateModule\n  ],\n})\nexport class PCreditPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/p-credit/p-credit.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { HttpProvider } from '../../providers/http/http';\nimport { UtilsProvider } from '../../providers/utils/utils';\nimport { Storage } from '@ionic/storage';\nimport { CommandsProvider } from '../../providers/commands/commands';\n\n\n/**\n * Generated class for the PCreditPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-p-credit',\n  templateUrl: 'p-credit.html',\n})\nexport class PCreditPage {\n  originalData: any;\n  modifiedData: any;\n\n  public message: string; \n  public lista1 : string;\n  rootPage = PCreditPage;\n  \n  public requestSecurity: string[]; //Variable del OTP\n  //obtencion del valided de security otp para no volver a pedir el OTP\n  public valide: boolean= false;\n  public procesoOTP: number=0;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, private storage: Storage, public http: HttpProvider, \n              public utils: UtilsProvider, public command: CommandsProvider) {\n \n              this.valide = this.navParams.get('valided');\n\n              if(\"\"!=this.navParams.get('valided') && this.navParams.get('valided')!=undefined){\n                this.valide = this.navParams.get('valided');\n              }\n              this.storage.get('procesoOTP').then((val) => {\n                if (val != null) { \n                  this.procesoOTP = val;\n                }     \n              });\n              this.procesoOTP = this.utils.getProcesoOTP();\n\n              // para cargar mas rapido las cuentas que vienen del OTP \n              this.cargarPCredit();\n  }\n\n  ionViewCanEnter(){  \n    \n    // para cargar mas rapido las cuentas que vienen del OTP \n    this.cargarPCredit();\n    var wait:boolean=true;\n    var canView:boolean=true;\n    this.procesoOTP = this.procesoOTP = this.utils.getProcesoOTP();\n    this.requestSecurity = this.utils.getCommands(this.command.E2LSCR72);\n    \n    if (this.requestSecurity[1] == this.utils.opt_validator && this.procesoOTP!=1 && this.valide!=true) {\n       //if(this.lista1 == null || this.lista1 == undefined){\n    \n        this.loadPCredit();\n        this.solicitudOTP();\n        canView = false; \n        \n    }\n    else{   \n      \n        this.loadPCredit();        \n        canView = true;       \n    }\n    return canView; \n \n  }\n\n  private solicitudOTP(){\n    \n    //Valor para solicitar el OTP\n    this.requestSecurity = this.utils.getCommands(this.command.E2LSCR72);\n    this.valide = this.navParams.get('valided');\n\n    //Obtencion de la variable de sesion para no volver a pedir el OTP\n    this.storage.get('procesoOTP').then((val) => {\n      if (val != null) {\n        this.procesoOTP = val;\n      }\n      this.navToOTP();\n    });\n\n  }\n\n  private navToOTP(){    \n\n    if (this.requestSecurity[1] == '*' && this.procesoOTP!=1 && this.valide!=true) {\n      this.navCtrl.push(\"SecurityOtpPage\",{irPantalla: \"PCreditPage\",  cmdAux: 'E2LSCR72' }); \n    }\n\n  }  \n  \n  //metodo para cargar la lista enviada desde security OTP la cual hasta se cargaba en loadPCredit\n  private cargarPCredit(){\n    this.storage.get('cuentasObtenidasOTP_P_Credit').then((val) =>    { \n     \n      this.lista1 = val;\n      this.storage.set('ccList1', val );\n        \n       this.storage.set('selectedAccount', val );  //Información de toda la tarjeta de credito\n    });\n  }\n\n\n  ionViewDidLoad() {\n    //obtención de la lista guardada en sesión para no volver hacer la consulta\n    this.storage.get('ccList1').then((val) =>    { if(val != null ){ this.lista1 = val; } });\n  }\n \n  //Metodo de enlace de card number\n  productoPagar(nombreTarjeta, numero ){\n    \n    this.storage.set('number_CreditCard', numero );\n    this.storage.set('name_CreditCard', nombreTarjeta );\n    this.navCtrl.push(\"ProductToPayPage\");     \n    //alert(\"tarjeta \"+nombreTarjeta);\n  }\n\n  private loadPCredit() {   \n    \n    this.cargarPCredit();\n    //var command = 'E2LSCR72';    \n    var command :string[] =  this.utils.getCommands(this.command.E2LSCR72);\n\n    //Entra la primera vez y necesita OTP realizar el CALL\n    if(this.requestSecurity[1] == this.utils.opt_validator && this.procesoOTP!=1 && this.valide!=true)\n    {\n      if (this.utils.getCommands != null && this.utils.getCommands != undefined && this.utils.getCommands.length > 0) \n      { \n        var param = command[0] + '&CH=' + this.utils.channel + '&LNG=' + this.utils.getLanguage() + '&SID='+this.utils.getSessionId()+'&E2EW=' + this.utils.separator + '' + this.utils.separator + this.utils.separator + 'E2LSCR72' + this.utils.separator + '0' + this.utils.separator + this.utils.separator + '&PAR=1+%BA5303710038523497+%BA12162017+%BA01162018+%BA1+%BA1+%BAD+%BA';\n        \n        this.http.callServer(param).then(res => {      \n          this.message = res.message;\n            if (this.message != '' && typeof this.message!==\"undefined\") {\n              this.utils.alertServidor(this.message);\n            } else {\n              this.cargarPCredit();\n              this.lista1 = res.lista1;\n              //alert(\"this.lista1 \"+this.lista1)\n              this.storage.set('ccList1', res.lista1 );\n              //Información de toda la tarjeta de credito\n             this.storage.set('selectedAccount', res.lista1 );\n            }\n        });\n      }\n\n    }\n    //Entra proveniente del securiti-otp y ya los datos estan en sesion\n    else if(this.requestSecurity[1] == this.utils.opt_validator && this.procesoOTP==1)\n    {\n      this.cargarPCredit();\n    }\n    //Entra cuando no se necesita hacer llamado al OTP y hace proceso completo\n    else if(this.requestSecurity[1] != this.utils.opt_validator)\n    { \n      if (this.utils.getCommands != null && this.utils.getCommands != undefined && this.utils.getCommands.length > 0) \n      { \n        var param = command[0] + '&CH=' + this.utils.channel + '&LNG=' + this.utils.getLanguage() + '&SID='+this.utils.getSessionId()+'&E2EW=' + this.utils.separator + '' + this.utils.separator + this.utils.separator + 'E2LSCR72' + this.utils.separator + '0' + this.utils.separator + this.utils.separator + '&PAR=1+%BA5303710038523497+%BA12162017+%BA01162018+%BA1+%BA1+%BAD+%BA';\n      \n        this.http.callServer(param).then(res => {      \n          this.message = res.message;\n            if (this.message != '' && typeof this.message!==\"undefined\") {\n              this.utils.alertServidor(this.message);\n            } else {\n              this.lista1 = res.lista1;\n              //alert(\"this.lista1 \"+this.lista1)\n              this.storage.set('ccList1', res.lista1 );\n              //Información de toda la tarjeta de credito\n             this.storage.set('selectedAccount', res.lista1 );\n            }\n          },\n          error => {\n            console.log(error);\n          });\n      }\n    }\n   \n  }\n\n  cancel(){ \n    //this.utils.cleanAll();\n    this.navCtrl.push(\"RutaPagosPage\"); \n  }\n\n  logout(){\n    this.utils.presentConfirm(\"LoginPage\");\n    //this.utils.logout();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/p-credit/p-credit.ts"],"sourceRoot":""}